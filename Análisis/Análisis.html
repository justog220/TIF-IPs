<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

<meta charset="utf-8" />
<meta name="generator" content="quarto-1.3.353" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

<meta name="author" content="Garcia Justo" />

<title>TIF Redes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<!-- htmldependencies:E3FAD763 -->
<style>html{ scroll-behavior: smooth; }</style>
<meta name="mermaid-theme" content="default"/>
<script  src="Análisis_files/libs/quarto-diagram/mermaid.min.js"></script>
<script  src="Análisis_files/libs/quarto-diagram/mermaid-init.js"></script>
<link  href="Análisis_files/libs/quarto-diagram/mermaid.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <div id="quarto-toc-target"></div>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">TIF Redes</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Garcia Justo </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>
<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#análisis-de-ips-reportadas-como-atacantes-por-ssh" id="toc-análisis-de-ips-reportadas-como-atacantes-por-ssh"><span class="header-section-number">1</span> Análisis de IPs reportadas como atacantes por SSH</a>
  <ul>
  <li><a href="#extracción-de-ips" id="toc-extracción-de-ips"><span class="header-section-number">1.1</span> Extracción de IPs</a>
  <ul>
  <li><a href="#importamos-la-implementación-de-las-peticiones-a-la-api" id="toc-importamos-la-implementación-de-las-peticiones-a-la-api"><span class="header-section-number">1.1.1</span> Importamos la implementación de las peticiones a la API</a></li>
  </ul></li>
  <li><a href="#índices-de-abuso" id="toc-índices-de-abuso"><span class="header-section-number">1.2</span> Índices de abuso</a></li>
  <li><a href="#análisis-de-procedencia" id="toc-análisis-de-procedencia"><span class="header-section-number">1.3</span> Análisis de procedencia</a></li>
  <li><a href="#análisis-de-frecuencia" id="toc-análisis-de-frecuencia"><span class="header-section-number">1.4</span> Análisis de frecuencia</a>
  <ul>
  <li><a href="#extracción-de-información" id="toc-extracción-de-información"><span class="header-section-number">1.4.1</span> Extracción de información</a></li>
  </ul></li>
  <li><a href="#análisis-de-isps" id="toc-análisis-de-isps"><span class="header-section-number">1.5</span> Análisis de ISPs</a></li>
  <li><a href="#análisis-de-uso" id="toc-análisis-de-uso"><span class="header-section-number">1.6</span> Análisis de uso</a></li>
  </ul></li>
  <li><a href="#análisis-de-ips-reportadas-por-ataque-ddos" id="toc-análisis-de-ips-reportadas-por-ataque-ddos"><span class="header-section-number">2</span> Análisis de IPs reportadas por ataque DDoS</a>
  <ul>
  <li><a href="#extracción-de-información-1" id="toc-extracción-de-información-1"><span class="header-section-number">2.1</span> Extracción de información</a></li>
  <li><a href="#índices-de-abuso-1" id="toc-índices-de-abuso-1"><span class="header-section-number">2.2</span> Índices de abuso</a></li>
  <li><a href="#análisis-de-procedencia-1" id="toc-análisis-de-procedencia-1"><span class="header-section-number">2.3</span> Análisis de procedencia</a></li>
  <li><a href="#análisis-de-frecuencia-1" id="toc-análisis-de-frecuencia-1"><span class="header-section-number">2.4</span> Análisis de frecuencia</a>
  <ul>
  <li><a href="#extracción-de-información-2" id="toc-extracción-de-información-2"><span class="header-section-number">2.4.1</span> Extracción de información</a></li>
  </ul></li>
  <li><a href="#análisis-de-isps-1" id="toc-análisis-de-isps-1"><span class="header-section-number">2.5</span> Análisis de ISPs</a></li>
  <li><a href="#análisis-de-uso-1" id="toc-análisis-de-uso-1"><span class="header-section-number">2.6</span> Análisis de uso</a></li>
  <li><a href="#visualización-de-la-distribución" id="toc-visualización-de-la-distribución"><span class="header-section-number">2.7</span> Visualización de la “distribución”</a>
  <ul>
  <li><a href="#veces-que-fueron-utilizadas-las-ips" id="toc-veces-que-fueron-utilizadas-las-ips"><span class="header-section-number">2.7.1</span> Veces que fueron utilizadas las IPs</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
<section id="análisis-de-ips-reportadas-como-atacantes-por-ssh" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Análisis de IPs reportadas como atacantes por SSH</h1>
<p>Los ataques por SSH (Secure Shell) son intentos maliciosos de comprometer un sistema a través del protocolo SSH.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="imagenes/ssh.png" class="img-fluid" /></p>
<figcaption>Protocolo SSH</figcaption>
</figure>
</div>
<p>SSH es muy utilizado porque permite establecer una conexión segura y cifrada entre un cliente y un servidor. Pero, establecida la conexión, puede ser también aprovechado por los atacantes.</p>
<p>Al proporcionarse está información no se especificó la naturaleza del ataque, pero entre los más comunes estan los de fuerza bruta.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  A[Datos \n proporcionados] --&gt; B[Pedido a API]
  B --&gt; C[Dataset\npara análisis]
  C --&gt; D[Índices de\nabuso]
  C --&gt; E[Análisis de\nprocedencia]
  C --&gt; F[Análisis de\nfrecuencia]
  C --&gt; G[Análisis de\nISPs]
  C --&gt; I[Análisis de\nuso]
</pre>
</div>
</div>
</div>
</div>
<section id="extracción-de-ips" class="level2" data-number="1.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span> Extracción de IPs</h2>
<p>Para la realización de este análisis contaba con una lista de IPs que fueron reportadas por conexiones SSH y ataques DDoS. En este caso extraeré las IPs de SSH haciendo uso de bash y Python.</p>
<div class="cell" data-tags="[]" data-execution_count="1">
<div class="sourceCode" id="cb1"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>patron <span class="op">=</span> <span class="st">&quot;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&quot;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>grep <span class="op">-</span>Eo <span class="st">&quot;$patron&quot;</span> data<span class="op">/</span>SSH.txt <span class="op">&gt;</span> data<span class="op">/</span>IPsSSH.txt</span></code></pre></div>
</div>
<div class="cell" data-tags="[]" data-execution_count="2">
<div class="sourceCode" id="cb2"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&quot;data/IPsSSH.txt&quot;</span>) <span class="im">as</span> ips:</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    ipSSH <span class="op">=</span> ips.read()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>ipSSH <span class="op">=</span> ipSSH.replace(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="st">&quot; &quot;</span>).split()</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>ipSSH</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>[&#39;54.144.244.57&#39;,
 &#39;188.166.216.223&#39;,
 &#39;220.94.228.162&#39;,
 &#39;218.92.0.99&#39;,
 &#39;116.193.159.2&#39;,
 &#39;109.117.92.13&#39;,
 &#39;167.99.112.43&#39;,
 &#39;89.248.163.219&#39;,
 &#39;143.198.204.177&#39;,
 &#39;61.177.173.45&#39;,
 &#39;8.222.204.225&#39;,
 &#39;220.135.119.188&#39;]</code></pre>
</div>
</div>
<section id="importamos-la-implementación-de-las-peticiones-a-la-api" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1"><span class="header-section-number">1.1.1</span> Importamos la implementación de las peticiones a la API</h3>
<div class="cell" data-tags="[]" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb4"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>cp ..<span class="op">/</span>app<span class="op">/</span>modulos<span class="op">/</span>abuseIPDB.py modulos<span class="op">/</span>abuseIPDB.py</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Importo los modulos necesarios</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> modulos.abuseIPDB <span class="im">import</span> AbuseIPDB</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code></pre></div>
</details>
</div>
<div class="cell" data-tags="[]" data-execution_count="4">
<div class="sourceCode" id="cb5"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Construyo el objeto</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>apiAbuse <span class="op">=</span> AbuseIPDB()</span></code></pre></div>
</div>
<div class="cell" data-tags="[]" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb6"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span></code></pre></div>
</details>
</div>
<div class="cell" data-tags="[]" data-execution_count="6">
<div class="sourceCode" id="cb7"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Declaro las keys de la info que devuelve mi implementación de requests</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>keys <span class="op">=</span> [<span class="st">&#39;esPublica&#39;</span>, <span class="st">&#39;estaEnWhitelist&#39;</span>, <span class="st">&#39;scoreAbuso&#39;</span>, <span class="st">&#39;pais&#39;</span>, <span class="st">&#39;codigoPais&#39;</span>, <span class="st">&#39;isp&#39;</span>, <span class="st">&#39;tipoDeUso&#39;</span>, <span class="st">&#39;ultimoReporte&#39;</span>]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>diccDf <span class="op">=</span> {<span class="st">&#39;ip&#39;</span> : []}</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> os.path.isfile(<span class="st">&quot;data/ipSSH.csv&quot;</span>):</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(<span class="st">&quot;data/ipSSH.csv&quot;</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> ip <span class="kw">in</span> ipSSH:</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        diccDf[<span class="st">&#39;ip&#39;</span>].append(ip)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        info <span class="op">=</span> apiAbuse.getInfo(ip)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> key <span class="kw">in</span> keys:</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> key <span class="kw">in</span> diccDf:</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>                diccDf[key].append(info[key])</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>                diccDf[key] <span class="op">=</span> [info[key]]</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>diccDf)</span></code></pre></div>
</div>
<div class="cell" data-tags="[]" data-execution_count="7">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb8"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(df.columns)</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-informaciondevuelta">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<caption>Table 1: Columnas del DataFrame construido a partir de la información solicitada del servidor</caption>
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>ip</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>esPublica</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>estaEnWhitelist</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>scoreAbuso</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>pais</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>codigoPais</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>isp</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>tipoDeUso</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>ultimoReporte</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<p>Listé en <a href="#tbl-informaciondevuelta">Table 1</a> la información que obtuve de la base de datos de AbuseIPDB para cada IP.</p>
<div class="cell" data-tags="[]" data-execution_count="8">
<div class="sourceCode" id="cb9"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">3</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ip</th>
<th data-quarto-table-cell-role="th">esPublica</th>
<th data-quarto-table-cell-role="th">estaEnWhitelist</th>
<th data-quarto-table-cell-role="th">scoreAbuso</th>
<th data-quarto-table-cell-role="th">pais</th>
<th data-quarto-table-cell-role="th">codigoPais</th>
<th data-quarto-table-cell-role="th">isp</th>
<th data-quarto-table-cell-role="th">tipoDeUso</th>
<th data-quarto-table-cell-role="th">ultimoReporte</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>54.144.244.57</td>
<td>True</td>
<td>False</td>
<td>55</td>
<td>NaN</td>
<td>US</td>
<td>Amazon Data Services NoVa</td>
<td>Data Center/Web Hosting/Transit</td>
<td>2023-05-24T06:13:13+00:00</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>188.166.216.223</td>
<td>True</td>
<td>False</td>
<td>100</td>
<td>NaN</td>
<td>SG</td>
<td>DigitalOcean LLC</td>
<td>Data Center/Web Hosting/Transit</td>
<td>2023-05-30T23:00:19+00:00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>220.94.228.162</td>
<td>True</td>
<td>False</td>
<td>100</td>
<td>NaN</td>
<td>KR</td>
<td>KT Corporation</td>
<td>NaN</td>
<td>2023-05-30T04:16:49+00:00</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-tags="[]" data-execution_count="9">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb10"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>unameds <span class="op">=</span> [i <span class="cf">for</span> i <span class="kw">in</span> df.columns <span class="cf">if</span> <span class="st">&#39;Unnamed&#39;</span> <span class="kw">in</span> i]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> unameds:</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    df.drop(i, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>df.to_csv(<span class="st">&quot;data/ipSSH.csv&quot;</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
</details>
</div>
</section>
</section>
<section id="índices-de-abuso" class="level2" data-number="1.2">
<h2 data-number="1.2"><span class="header-section-number">1.2</span> Índices de abuso</h2>
<div class="cell" data-tags="[]" data-execution_count="10">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb11"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> df[<span class="st">&quot;scoreAbuso&quot;</span>].value_counts().to_dict()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(data<span class="op">=</span>{<span class="st">&quot;Score&quot;</span>: <span class="bu">list</span>(recuento.keys()), <span class="st">&quot;Reportes&quot;</span>: <span class="bu">list</span>(recuento.values())})</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-indicesssh">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<caption>Table 2: Indice de abuso y las veces que se repite</caption>
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Score</th>
<th data-quarto-table-cell-role="th">Reportes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>100</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>55</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<p>Como se puede apreciar en la tabla de arriba (<a href="#tbl-indicesssh">Table 2</a>), han sido múltiples veces reportadas por distintos usuarios a lo largo del mundo. Esto hace que la base de datos las califique con un score de abuso alto. Por lo tanto, tenemos la certeza de que son IPs que han sido utilizadas con fines malintencionados previamente y que quien proporcionó los datos no fue el único afectado.</p>
</section>
<section id="análisis-de-procedencia" class="level2" data-number="1.3">
<h2 data-number="1.3"><span class="header-section-number">1.3</span> Análisis de procedencia</h2>
<div class="cell" data-tags="[]" data-execution_count="11">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb12"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pycountry</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;pais&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;codigoPais&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> codigo: pycountry.countries.get(alpha_2<span class="op">=</span>codigo).name)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>dfgdp <span class="op">=</span> df.copy()</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>dfgdp[<span class="st">&#39;codigoPais&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;pais&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> nombre: pycountry.countries.search_fuzzy(nombre)[<span class="dv">0</span>].alpha_3)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>mapa <span class="op">=</span> gpd.read_file(gpd.datasets.get_path(<span class="st">&#39;naturalearth_lowres&#39;</span>))</span></code></pre></div>
</details>
</div>
<div class="callout callout-style-default callout-note callout-titled" data-header="false">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Todas estas librerias utilizan convenciones, por lo cual es importante checkear que esten presentes todos los paises que queremos plotear</p>
</div>
</div>
<div class="cell" data-tags="[]" data-execution_count="12">
<div class="sourceCode" id="cb13"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.unique(dfgdp[<span class="st">&quot;codigoPais&quot;</span>].loc[<span class="op">~</span>dfgdp[<span class="st">&quot;codigoPais&quot;</span>].isin(mapa[<span class="st">&quot;iso_a3&quot;</span>])]))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[&#39;HKG&#39; &#39;SGP&#39;]</code></pre>
</div>
</div>
<p>Pude notar que tanto Hong Kong, como Singapur no estan representadas en el mapa mundi por ser ciudades. Por ello, debo cargarlas desde otro dataset para marcarla.</p>
<p>En <a href="#fig-mapa">Figure 1</a> se presenta el mapamundi con los países o ciudades-estado de donde provienen los ataques pintados de rojo y azul respectivamente.</p>
<div class="cell" data-tags="[]" data-execution_count="13">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb15"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>paisesMarcados <span class="op">=</span> mapa[mapa[<span class="st">&#39;iso_a3&#39;</span>].isin(dfgdp[<span class="st">&quot;codigoPais&quot;</span>])]</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">10</span>))</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>mapa.plot(ax<span class="op">=</span>ax, edgecolor<span class="op">=</span><span class="st">&#39;grey&#39;</span>, color<span class="op">=</span><span class="st">&#39;lightgrey&#39;</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>paisesMarcados.plot(ax<span class="op">=</span>ax, edgecolor<span class="op">=</span><span class="st">&#39;black&#39;</span>, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>ciudades <span class="op">=</span> gpd.read_file(gpd.datasets.get_path(<span class="st">&#39;naturalearth_cities&#39;</span>))</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>singapur <span class="op">=</span> ciudades[ciudades[<span class="st">&#39;name&#39;</span>] <span class="op">==</span> <span class="st">&#39;Singapore&#39;</span>]</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>hongkong <span class="op">=</span> ciudades[ciudades[<span class="st">&#39;name&#39;</span>] <span class="op">==</span> <span class="st">&#39;Hong Kong&#39;</span>]</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>singapur.plot(ax<span class="op">=</span>ax, edgecolor<span class="op">=</span><span class="st">&#39;black&#39;</span>, color<span class="op">=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>hongkong.plot(ax<span class="op">=</span>ax, edgecolor<span class="op">=</span><span class="st">&#39;black&#39;</span>, color<span class="op">=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-mapa" class="quarto-figure quarto-figure-center">
<figure>
<p><img src="Análisis_files/figure-html/fig-mapa-output-1.png" class="img-fluid" /></p>
<figcaption>Figure 1: Mapa con los lugares del que proceden las IPs</figcaption>
</figure>
</div>
</div>
</div>
<p>En la siguiente figura (<a href="#fig-countplot">Figure 2</a>), se puede apreciar el número de IPs que pertenecen a cada uno de los paises, con Singapur encabezando la lista.</p>
<div class="cell" data-tags="[]" data-execution_count="59">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb16"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> dfgdp[<span class="st">&quot;codigoPais&quot;</span>].value_counts().rename_axis(<span class="st">&#39;pais&#39;</span>).to_frame(<span class="st">&#39;counts&#39;</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>counts.reset_index(level<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> counts.sort_values(by<span class="op">=</span><span class="st">&#39;counts&#39;</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>bars <span class="op">=</span> plt.barh(counts[<span class="st">&quot;pais&quot;</span>], counts[<span class="st">&#39;counts&#39;</span>], color<span class="op">=</span><span class="st">&#39;#ef9f76&#39;</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>ax.spines[[<span class="st">&#39;right&#39;</span>, <span class="st">&#39;top&#39;</span>, <span class="st">&#39;bottom&#39;</span>]].set_visible(<span class="va">False</span>) </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>ax.xaxis.set_visible(<span class="va">False</span>)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">&#39;left&#39;</span>].set_color(<span class="st">&#39;black&#39;</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>ax.tick_params(axis<span class="op">=</span><span class="st">&#39;y&#39;</span>, colors<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>ax.bar_label(bars, color<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-countplot" class="quarto-figure quarto-figure-center">
<figure>
<p><img src="Análisis_files/figure-html/fig-countplot-output-1.png" class="img-fluid" /></p>
<figcaption>Figure 2: Recuento del número de reportes</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-tags="[]" data-execution_count="15">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb17"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> df[<span class="st">&quot;pais&quot;</span>].value_counts().to_dict()</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(data<span class="op">=</span>{<span class="st">&quot;Pais&quot;</span>: <span class="bu">list</span>(recuento.keys()), <span class="st">&quot;Reportes&quot;</span>: <span class="bu">list</span>(recuento.values())})</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Pais</th>
<th data-quarto-table-cell-role="th">Reportes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Singapore</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>United States</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>China</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Korea, Republic of</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Hong Kong</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Italy</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Netherlands</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Taiwan, Province of China</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="análisis-de-frecuencia" class="level2" data-number="1.4">
<h2 data-number="1.4"><span class="header-section-number">1.4</span> Análisis de frecuencia</h2>
<p>Definí esta tarea para así, tratar de identificar cierto patron asociado a la hora de ataque.</p>
<section id="extracción-de-información" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1"><span class="header-section-number">1.4.1</span> Extracción de información</h3>
<div class="cell" data-tags="[]" data-execution_count="16">
<div class="sourceCode" id="cb18"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>patron <span class="op">=</span> <span class="st">&quot;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&quot;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>grep <span class="op">-</span>Eo <span class="st">&quot;$patron&quot;</span> data<span class="op">/</span>SSH.txt <span class="op">&gt;</span> data<span class="op">/</span>IPsSSH.txt</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>patron <span class="op">=</span> <span class="st">&quot;[a-z]</span><span class="sc">{3}</span><span class="st">\/[0-9]</span><span class="sc">{2}</span><span class="st">\/[0-9]</span><span class="sc">{4}</span><span class="st">&quot;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>grep <span class="op">-</span>Eo <span class="st">&quot;$patron&quot;</span> data<span class="op">/</span>SSH.txt <span class="op">&gt;&gt;</span> data<span class="op">/</span>IPsSSH.txt</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>patron <span class="op">=</span> <span class="st">&quot;[0-9]</span><span class="sc">{2}</span><span class="st">\:[0-9]</span><span class="sc">{2}</span><span class="st">\:[0-9]</span><span class="sc">{2}</span><span class="st">&quot;</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>grep <span class="op">-</span>Eo <span class="st">&quot;$patron&quot;</span> data<span class="op">/</span>SSH.txt <span class="op">&gt;&gt;</span> data<span class="op">/</span>IPsSSH.txt</span></code></pre></div>
</div>
<div class="cell" data-tags="[]" data-execution_count="17">
<div class="sourceCode" id="cb19"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&quot;data/IPsSSH.txt&quot;</span>) <span class="im">as</span> ips:</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> ips.read()</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> data.replace(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="st">&quot; &quot;</span>).split()</span></code></pre></div>
</div>
<div class="cell" data-tags="[]" data-execution_count="18">
<div class="sourceCode" id="cb20"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">int</span>(<span class="bu">len</span>(data)<span class="op">/</span><span class="dv">3</span>)):</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    data[i] <span class="op">=</span> data[i] <span class="op">+</span> <span class="st">&quot; &quot;</span> <span class="op">+</span> data[<span class="bu">int</span>(<span class="bu">len</span>(data)<span class="op">/</span><span class="dv">3</span>)<span class="op">+</span>i] <span class="op">+</span> <span class="st">&quot; &quot;</span> <span class="op">+</span> data[(<span class="bu">int</span>(<span class="bu">len</span>(data)<span class="op">/</span><span class="dv">3</span>))<span class="op">*</span><span class="dv">2</span><span class="op">+</span>i]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[:<span class="bu">int</span>(<span class="bu">len</span>(data)<span class="op">/</span><span class="dv">3</span>)]</span></code></pre></div>
</div>
<div class="cell" data-tags="[]" data-execution_count="19">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb21"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime, time</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>diccInfo <span class="op">=</span> {</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;IP&quot;</span>: [],</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Fecha&quot;</span>: [],</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Hora&quot;</span>: []</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>eventos <span class="op">=</span> []</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> data:</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    diccInfo[<span class="st">&quot;IP&quot;</span>].append(i.split()[<span class="dv">0</span>])</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    diccInfo[<span class="st">&quot;Fecha&quot;</span>].append(i.split()[<span class="dv">1</span>])</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    mes <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    dia <span class="op">=</span> <span class="bu">int</span>(i.split()[<span class="dv">1</span>].split(sep<span class="op">=</span><span class="st">&quot;/&quot;</span>)[<span class="dv">1</span>])</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    año <span class="op">=</span> <span class="bu">int</span>(i.split()[<span class="dv">1</span>].split(sep<span class="op">=</span><span class="st">&quot;/&quot;</span>)[<span class="dv">2</span>])</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    h <span class="op">=</span> <span class="bu">int</span>(i.split()[<span class="dv">2</span>].split(sep<span class="op">=</span><span class="st">&quot;:&quot;</span>)[<span class="dv">0</span>])</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> <span class="bu">int</span>(i.split()[<span class="dv">2</span>].split(sep<span class="op">=</span><span class="st">&quot;:&quot;</span>)[<span class="dv">1</span>])</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> <span class="bu">int</span>(i.split()[<span class="dv">2</span>].split(sep<span class="op">=</span><span class="st">&quot;:&quot;</span>)[<span class="dv">2</span>])</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    diccInfo[<span class="st">&quot;Hora&quot;</span>].append(time(hour<span class="op">=</span><span class="bu">int</span>(h), minute<span class="op">=</span><span class="bu">int</span>(m), second<span class="op">=</span><span class="bu">int</span>(s)))</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">#diccInfo[&quot;Hora&quot;].append(i.split()[2])</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    eventos.append((i.split()[<span class="dv">0</span>],datetime(year<span class="op">=</span>año, month<span class="op">=</span>mes, day<span class="op">=</span>dia, hour<span class="op">=</span>h, minute<span class="op">=</span>m)))</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>dfHora <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>diccInfo)</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>dfHora[<span class="st">&quot;Pais&quot;</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> dfHora.iterrows():</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    ip <span class="op">=</span> row[<span class="st">&quot;IP&quot;</span>]</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    row[<span class="st">&quot;Pais&quot;</span>] <span class="op">=</span> df[df[<span class="st">&#39;ip&#39;</span>] <span class="op">==</span> ip].iloc[<span class="dv">0</span>][<span class="st">&#39;pais&#39;</span>]</span></code></pre></div>
</details>
</div>
<div class="cell" data-tags="[]" data-execution_count="20">
<div class="sourceCode" id="cb22"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>fecha <span class="op">=</span> [evento[<span class="dv">1</span>] <span class="cf">for</span> evento <span class="kw">in</span> eventos]</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>etiquetas <span class="op">=</span> [evento[<span class="dv">0</span>] <span class="cf">for</span> evento <span class="kw">in</span> eventos]</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>ax.eventplot(fecha, lineoffsets<span class="op">=</span><span class="fl">0.1</span>, linelengths<span class="op">=</span><span class="fl">0.1</span>, color<span class="op">=</span><span class="st">&#39;r&#39;</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="va">None</span>)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>ax.set_yticklabels([])</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(datetime(<span class="dv">2023</span>, <span class="dv">5</span>, <span class="dv">23</span>, <span class="dv">0</span>, <span class="dv">0</span>), datetime(<span class="dv">2023</span>, <span class="dv">5</span>, <span class="dv">23</span>, <span class="dv">23</span>, <span class="dv">59</span>))</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>fig.autofmt_xdate()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-eventosssh" class="quarto-figure quarto-figure-center">
<figure>
<p><img src="Análisis_files/figure-html/fig-eventosssh-output-1.png" class="img-fluid" /></p>
<figcaption>Figure 3: Visualización de eventos de SSH</figcaption>
</figure>
</div>
</div>
</div>
<p>En <a href="#fig-eventosssh">Figure 3</a> busqué representar los eventos en función del tiempo yu podemos ver, que el sistema atacado registró estas IPs en un solo día (23 de Mayo) durante horas de la mañana.</p>
</section>
</section>
<section id="análisis-de-isps" class="level2" data-number="1.5">
<h2 data-number="1.5"><span class="header-section-number">1.5</span> Análisis de ISPs</h2>
<p><a href="#tbl-recuentoispssh">Table 3</a> muestra cuantos de los reportes corresponden a cada uno de los proveedores de internet.</p>
<div class="cell" data-tags="[]" data-execution_count="21">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb23"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> df[<span class="st">&quot;isp&quot;</span>].value_counts().to_dict()</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>{<span class="st">&quot;ISP&quot;</span>: <span class="bu">list</span>(recuento.keys()), <span class="st">&quot;Reportes&quot;</span>: <span class="bu">list</span>(recuento.values())})</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>recuento</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="21">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-recuentoispssh">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<caption>Table 3: Número de IPs reportadas de cada ISP</caption>
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ISP</th>
<th data-quarto-table-cell-role="th">Reportes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>DigitalOcean LLC</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>ChinaNet Jiangsu Province Network</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Amazon Data Services NoVa</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>KT Corporation</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Pacswitch Globe Telecom Limited</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Vodafone Italia S.p.A.</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>FiberXpress BV</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Alibaba.com Singapore E-Commerce Private Limited</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Chunghwa Telecom Co. Ltd.</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div class="cell" data-tags="[]" data-execution_count="58">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb24"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> df[<span class="st">&quot;isp&quot;</span>].value_counts().rename_axis(<span class="st">&#39;isp&#39;</span>).to_frame(<span class="st">&#39;counts&#39;</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>counts.reset_index(level<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> counts.sort_values(by<span class="op">=</span><span class="st">&#39;counts&#39;</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>bars <span class="op">=</span> plt.barh(counts[<span class="st">&quot;isp&quot;</span>], counts[<span class="st">&#39;counts&#39;</span>], color<span class="op">=</span><span class="st">&#39;#ef9f76&#39;</span>)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>ax.spines[[<span class="st">&#39;right&#39;</span>, <span class="st">&#39;top&#39;</span>, <span class="st">&#39;bottom&#39;</span>]].set_visible(<span class="va">False</span>) </span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>ax.xaxis.set_visible(<span class="va">False</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">&#39;left&#39;</span>].set_color(<span class="st">&#39;black&#39;</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>ax.tick_params(axis<span class="op">=</span><span class="st">&#39;y&#39;</span>, colors<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>ax.bar_label(bars, color<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-countplotispssh" class="quarto-figure quarto-figure-center">
<figure>
<p><img src="Análisis_files/figure-html/fig-countplotispssh-output-1.png" class="img-fluid" /></p>
<figcaption>Figure 4: Recuento del número de veces que fue reportado un ISP</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-countplotispssh">Figure 4</a> muestra un recuento de los distintos ISPs que tienen asignadas las IPs.</p>
</section>
<section id="análisis-de-uso" class="level2" data-number="1.6">
<h2 data-number="1.6"><span class="header-section-number">1.6</span> Análisis de uso</h2>
<p><a href="#tbl-usosssh">Table 4</a> muestra el número de veces que fue declarado cierto uso de una IP.</p>
<div class="cell" data-execution_count="23">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb25"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> df[<span class="st">&quot;tipoDeUso&quot;</span>].value_counts().to_dict()</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>{<span class="st">&quot;uso&quot;</span>: <span class="bu">list</span>(recuento.keys()), <span class="st">&quot;Reportes&quot;</span>: <span class="bu">list</span>(recuento.values())})</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>recuento</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-usosssh">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<caption>Table 4: Recuento de usos declarados por las IPs</caption>
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">uso</th>
<th data-quarto-table-cell-role="th">Reportes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Data Center/Web Hosting/Transit</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Fixed Line ISP</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div class="cell" data-tags="[]" data-execution_count="57">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb26"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> df[<span class="st">&quot;tipoDeUso&quot;</span>].value_counts().rename_axis(<span class="st">&#39;uso&#39;</span>).to_frame(<span class="st">&#39;counts&#39;</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>counts.reset_index(level<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> counts.sort_values(by<span class="op">=</span><span class="st">&#39;counts&#39;</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>bars <span class="op">=</span> plt.barh(counts[<span class="st">&quot;uso&quot;</span>], counts[<span class="st">&#39;counts&#39;</span>], color<span class="op">=</span><span class="st">&#39;#ef9f76&#39;</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>ax.spines[[<span class="st">&#39;right&#39;</span>, <span class="st">&#39;top&#39;</span>, <span class="st">&#39;bottom&#39;</span>]].set_visible(<span class="va">False</span>) </span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>ax.xaxis.set_visible(<span class="va">False</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">&#39;left&#39;</span>].set_color(<span class="st">&#39;black&#39;</span>)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>ax.tick_params(axis<span class="op">=</span><span class="st">&#39;y&#39;</span>, colors<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>ax.bar_label(bars, color<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-countplotusossh" class="quarto-figure quarto-figure-center">
<figure>
<p><img src="Análisis_files/figure-html/fig-countplotusossh-output-1.png" class="img-fluid" /></p>
<figcaption>Figure 5: Recuento de los usos que se les da a las IPs</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-countplotusossh">Figure 5</a> permite visualizar los usos declarados de las IPs declarados.</p>
</section>
</section>
<section id="análisis-de-ips-reportadas-por-ataque-ddos" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Análisis de IPs reportadas por ataque DDoS</h1>
<p>Los ataques de denegación de servicio destribuido (DDoS), son intentos de saturar los recursos de un sistema o red, sobrecargando la red con tráfico inesperado.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="imagenes/ddos.png" class="img-fluid" /></p>
<figcaption>Ilustración ataque DDoS (Cloudflare, 2023)</figcaption>
</figure>
</div>
<p>El foco no es infiltrarse o robar información, sino que busca abrumar y colapsar el objetivo mediante grandes volúmenes de solicitudes.</p>
<p>La característica distintiva de estos ataques es que son “distribuidos”. No se realiza desde una única fuente, sino que se usan múltiples dispositivos como atacantes.</p>
<p>Lo más probable es que quién reporto estas IPs como atacantes haya detectado grandes volumenes o picos de solicitudes en un corto tiempo, levantando sospechas que se podría tratar de atacantes.</p>
<p>Para intentar extraer información de los datos definí el siguiente flujo de trabajo:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  A[Datos \n proporcionados] --&gt; B[Pedido a API]
  B --&gt; C[Dataset\npara análisis]
  C --&gt; D[Índices de\nabuso]
  C --&gt; E[Análisis de\nprocedencia]
  C --&gt; F[Análisis de\nfrecuencia]
  C --&gt; G[Análisis de\nISPs]
  C --&gt; I[Análisis de\nuso]
  C --&gt; H[Visualización \nde distribución]
</pre>
</div>
</div>
</div>
</div>
<section id="extracción-de-información-1" class="level2" data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span> Extracción de información</h2>
<div class="cell" data-execution_count="25">
<div class="sourceCode" id="cb27"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>patron <span class="op">=</span> <span class="st">&quot;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&quot;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>grep <span class="op">-</span>Eo <span class="st">&quot;$patron&quot;</span> data<span class="op">/</span>DDOS.txt <span class="op">&gt;</span> data<span class="op">/</span>IPsDDoS.txt</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>patron <span class="op">=</span> <span class="st">&quot;[a-z]</span><span class="sc">{3}</span><span class="st">\/[0-9]</span><span class="sc">{2}</span><span class="st">\/[0-9]</span><span class="sc">{4}</span><span class="st">&quot;</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>grep <span class="op">-</span>Eo <span class="st">&quot;$patron&quot;</span> data<span class="op">/</span>DDOS.txt <span class="op">&gt;&gt;</span> data<span class="op">/</span>IPsDDoS.txt</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>patron <span class="op">=</span> <span class="st">&quot;[0-9]</span><span class="sc">{2}</span><span class="st">\:[0-9]</span><span class="sc">{2}</span><span class="st">\:[0-9]</span><span class="sc">{2}</span><span class="st">&quot;</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>grep <span class="op">-</span>Eo <span class="st">&quot;$patron&quot;</span> data<span class="op">/</span>DDOS.txt <span class="op">&gt;&gt;</span> data<span class="op">/</span>IPsDDoS.txt</span></code></pre></div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode" id="cb28"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&quot;data/IPsDDoS.txt&quot;</span>) <span class="im">as</span> ips:</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> ips.read()</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> data.replace(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="st">&quot; &quot;</span>).split()</span></code></pre></div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode" id="cb29"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>ips <span class="op">=</span> []</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>dia <span class="op">=</span> []</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>hora <span class="op">=</span> []</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">int</span>(<span class="bu">len</span>(data)<span class="op">/</span><span class="dv">3</span>)):</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    ips.append(data[i])</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    dia.append(data[<span class="bu">int</span>(<span class="bu">len</span>(data)<span class="op">/</span><span class="dv">3</span>)<span class="op">+</span>i])</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    hora.append(data[(<span class="bu">int</span>(<span class="bu">len</span>(data)<span class="op">/</span><span class="dv">3</span>))<span class="op">*</span><span class="dv">2</span><span class="op">+</span>i])</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    data[i] <span class="op">=</span> data[i] <span class="op">+</span> <span class="st">&quot; &quot;</span> <span class="op">+</span> data[<span class="bu">int</span>(<span class="bu">len</span>(data)<span class="op">/</span><span class="dv">3</span>)<span class="op">+</span>i] <span class="op">+</span> <span class="st">&quot; &quot;</span> <span class="op">+</span> data[(<span class="bu">int</span>(<span class="bu">len</span>(data)<span class="op">/</span><span class="dv">3</span>))<span class="op">*</span><span class="dv">2</span><span class="op">+</span>i]</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[:<span class="bu">int</span>(<span class="bu">len</span>(data)<span class="op">/</span><span class="dv">3</span>)]</span></code></pre></div>
</div>
<div class="cell" data-execution_count="28">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb30"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>{<span class="st">&#39;ip&#39;</span>: ips,</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&#39;dia&#39;</span>: dia,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&#39;hora&#39;</span>: hora})</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>apiAbuse <span class="op">=</span> AbuseIPDB()</span></code></pre></div>
</details>
</div>
<div class="cell" data-execution_count="29">
<div class="sourceCode" id="cb31"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Declaro las keys de la info que devuelve mi implementación de requests</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>keys <span class="op">=</span> [<span class="st">&#39;esPublica&#39;</span>, <span class="st">&#39;estaEnWhitelist&#39;</span>, <span class="st">&#39;scoreAbuso&#39;</span>, <span class="st">&#39;pais&#39;</span>, <span class="st">&#39;codigoPais&#39;</span>, <span class="st">&#39;isp&#39;</span>, <span class="st">&#39;tipoDeUso&#39;</span>, <span class="st">&#39;ultimoReporte&#39;</span>]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>diccDf <span class="op">=</span> {<span class="st">&#39;ip&#39;</span> : []}</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> os.path.isfile(<span class="st">&quot;data/ipDDOS.csv&quot;</span>):</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(<span class="st">&quot;data/ipDDOS.csv&quot;</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> ip, i <span class="kw">in</span> <span class="bu">zip</span>(ips, <span class="bu">range</span>(<span class="bu">len</span>(ips))):</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>        clear_output()</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">/</span><span class="sc">{</span><span class="bu">len</span>(ips)<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>        diccDf[<span class="st">&#39;ip&#39;</span>].append(ip)</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>        info <span class="op">=</span> apiAbuse.getInfo(ip)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> key <span class="kw">in</span> keys:</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> key <span class="kw">in</span> diccDf:</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>                diccDf[key].append(info[key])</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>                diccDf[key] <span class="op">=</span> [info[key]]</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>diccDf)</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&quot;hora&quot;</span>] <span class="op">=</span> data[<span class="st">&quot;hora&quot;</span>]</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&quot;dia&quot;</span>] <span class="op">=</span> data[<span class="st">&quot;dia&quot;</span>]</span></code></pre></div>
</div>
<div class="cell" data-execution_count="30">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb32"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>unameds <span class="op">=</span> [i <span class="cf">for</span> i <span class="kw">in</span> df.columns <span class="cf">if</span> <span class="st">&#39;Unnamed&#39;</span> <span class="kw">in</span> i]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> unameds:</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    df.drop(i, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>df.to_csv(<span class="st">&quot;data/ipDDOS.csv&quot;</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="índices-de-abuso-1" class="level2" data-number="2.2">
<h2 data-number="2.2"><span class="header-section-number">2.2</span> Índices de abuso</h2>
<div class="cell" data-execution_count="31">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb33"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> df[<span class="st">&quot;scoreAbuso&quot;</span>].value_counts().to_dict()</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(data<span class="op">=</span>{<span class="st">&quot;Score de abuso&quot;</span>: <span class="bu">list</span>(recuento.keys()), <span class="st">&quot;Reportes&quot;</span>: <span class="bu">list</span>(recuento.values())})</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="31">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-indicesddos">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<caption>Table 5: Indice de abuso y las veces que se repite</caption>
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Score de abuso</th>
<th data-quarto-table-cell-role="th">Reportes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0</td>
<td>375</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>10</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<p>Contrariamente de lo esperado, en <a href="#tbl-indicesddos">Table 5</a>, puedo observar que la gran mayoría tienen un score de abuso nulo y las que no, es muy bajo.</p>
<p>Lo más simple sería pensar que estas IPs no hayan atacado a más usuarios, pero considero que es poco probable. Por otro lado, podría deberse a la distribución de este ataque, haciendo que en otros sistemas vulnerados pase desapercibido. Otra opción es que el sistema que los reporto tenga mecanismos deficientes para la detección de posibles ataques.</p>
</section>
<section id="análisis-de-procedencia-1" class="level2" data-number="2.3">
<h2 data-number="2.3"><span class="header-section-number">2.3</span> Análisis de procedencia</h2>
<div class="cell" data-execution_count="32">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb34"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pycountry</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;pais&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;codigoPais&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> codigo: pycountry.countries.get(alpha_2<span class="op">=</span>codigo).name)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>dfgdp <span class="op">=</span> df.copy()</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>dfgdp[<span class="st">&#39;codigoPais&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;pais&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> nombre: pycountry.countries.search_fuzzy(nombre)[<span class="dv">0</span>].alpha_3)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>mapa <span class="op">=</span> gpd.read_file(gpd.datasets.get_path(<span class="st">&#39;naturalearth_lowres&#39;</span>))</span></code></pre></div>
</details>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode" id="cb35"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.unique(dfgdp[<span class="st">&quot;codigoPais&quot;</span>].loc[<span class="op">~</span>dfgdp[<span class="st">&quot;codigoPais&quot;</span>].isin(mapa[<span class="st">&quot;iso_a3&quot;</span>])]))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[&#39;HKG&#39;]</code></pre>
</div>
</div>
<p>En <a href="#fig-mapaddos">Figure 6</a> podemos observar el mapamundi y los paises o ciudades-estado de donde provienen las IPs coloreados.</p>
<div class="cell" data-execution_count="34">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb37"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>paisesMarcados <span class="op">=</span> mapa[mapa[<span class="st">&#39;iso_a3&#39;</span>].isin(dfgdp[<span class="st">&quot;codigoPais&quot;</span>])]</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">10</span>))</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>mapa.plot(ax<span class="op">=</span>ax, edgecolor<span class="op">=</span><span class="st">&#39;grey&#39;</span>, color<span class="op">=</span><span class="st">&#39;lightgrey&#39;</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>paisesMarcados.plot(ax<span class="op">=</span>ax, edgecolor<span class="op">=</span><span class="st">&#39;black&#39;</span>, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>ciudades <span class="op">=</span> gpd.read_file(gpd.datasets.get_path(<span class="st">&#39;naturalearth_cities&#39;</span>))</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>hongkong <span class="op">=</span> ciudades[ciudades[<span class="st">&#39;name&#39;</span>] <span class="op">==</span> <span class="st">&#39;Hong Kong&#39;</span>]</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>hongkong.plot(ax<span class="op">=</span>ax, edgecolor<span class="op">=</span><span class="st">&#39;black&#39;</span>, color<span class="op">=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-mapaddos" class="quarto-figure quarto-figure-center">
<figure>
<p><img src="Análisis_files/figure-html/fig-mapaddos-output-1.png" class="img-fluid" /></p>
<figcaption>Figure 6: Mapa con los lugares del que proceden las IPs</figcaption>
</figure>
</div>
</div>
</div>
<p>En la siguiente tabla (<a href="#tbl-paisesddos">Table 6</a>), se puede apreciar el número de IPs que pertenecen a cada uno de los paises y una representación gráfica de ello para tener una mejor noción (<a href="#fig-countplotddos">Figure 7</a>).</p>
<div class="cell" data-execution_count="35">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb38"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> df[<span class="st">&quot;pais&quot;</span>].value_counts().to_dict()</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(data<span class="op">=</span>{<span class="st">&quot;Pais&quot;</span>: <span class="bu">list</span>(recuento.keys()), <span class="st">&quot;Reportes&quot;</span>: <span class="bu">list</span>(recuento.values())})</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="35">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-paisesddos">
<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<caption>Table 6: Número de IPs que corresponden a cada país.</caption>
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Pais</th>
<th data-quarto-table-cell-role="th">Reportes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Hong Kong</td>
<td>174</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Philippines</td>
<td>118</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>China</td>
<td>75</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>United States</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Canada</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Bangladesh</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Taiwan, Province of China</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Brazil</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div class="cell" data-tags="[]" data-execution_count="56">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb39"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> df[<span class="st">&quot;pais&quot;</span>].value_counts().rename_axis(<span class="st">&#39;pais&#39;</span>).to_frame(<span class="st">&#39;counts&#39;</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>counts.reset_index(level<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> counts.sort_values(by<span class="op">=</span><span class="st">&#39;counts&#39;</span>)</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>bars <span class="op">=</span> plt.barh(counts[<span class="st">&quot;pais&quot;</span>], counts[<span class="st">&#39;counts&#39;</span>], color<span class="op">=</span><span class="st">&#39;#ef9f76&#39;</span>)</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>ax.spines[[<span class="st">&#39;right&#39;</span>, <span class="st">&#39;top&#39;</span>, <span class="st">&#39;bottom&#39;</span>]].set_visible(<span class="va">False</span>) </span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>ax.xaxis.set_visible(<span class="va">False</span>)</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">&#39;left&#39;</span>].set_color(<span class="st">&#39;black&#39;</span>)</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>ax.tick_params(axis<span class="op">=</span><span class="st">&#39;y&#39;</span>, colors<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>ax.bar_label(bars, color<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-countplotddos" class="quarto-figure quarto-figure-center">
<figure>
<p><img src="Análisis_files/figure-html/fig-countplotddos-output-1.png" class="img-fluid" /></p>
<figcaption>Figure 7: Número de reportes por país</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="análisis-de-frecuencia-1" class="level2" data-number="2.4">
<h2 data-number="2.4"><span class="header-section-number">2.4</span> Análisis de frecuencia</h2>
<p>Al igual que con los ataques SSH, realicé este parso para tratar de identificar cierto patrón asociado a la hora de ataque.</p>
<section id="extracción-de-información-2" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1"><span class="header-section-number">2.4.1</span> Extracción de información</h3>
<div class="cell" data-execution_count="37">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb40"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>eventosDDoS <span class="op">=</span> []</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    fecha <span class="op">=</span> row[<span class="st">&quot;dia&quot;</span>].split(sep<span class="op">=</span><span class="st">&quot;/&quot;</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> fecha[<span class="dv">0</span>] <span class="op">!=</span> <span class="st">&#39;may&#39;</span>:</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(fecha[<span class="dv">0</span>])</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>        mes <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    dia <span class="op">=</span> fecha[<span class="dv">1</span>]</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    año <span class="op">=</span> fecha[<span class="dv">2</span>]</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    tiempo <span class="op">=</span> row[<span class="st">&quot;hora&quot;</span>].split(sep<span class="op">=</span><span class="st">&quot;:&quot;</span>)</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>    hora <span class="op">=</span> tiempo[<span class="dv">0</span>]</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>    minuto <span class="op">=</span> tiempo[<span class="dv">1</span>]</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    eventosDDoS.append((row[<span class="st">&quot;ip&quot;</span>], datetime(<span class="bu">int</span>(año), <span class="bu">int</span>(mes), <span class="bu">int</span>(dia), <span class="bu">int</span>(hora), <span class="bu">int</span>(minuto))))</span></code></pre></div>
</details>
</div>
<div class="cell" data-execution_count="38">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb41"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>fecha <span class="op">=</span> [evento[<span class="dv">1</span>] <span class="cf">for</span> evento <span class="kw">in</span> eventosDDoS]</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>etiquetas <span class="op">=</span> [evento[<span class="dv">0</span>] <span class="cf">for</span> evento <span class="kw">in</span> eventosDDoS]</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>ax.eventplot(fecha, lineoffsets<span class="op">=</span><span class="fl">0.1</span>, linelengths<span class="op">=</span><span class="fl">0.1</span>, color<span class="op">=</span><span class="st">&#39;r&#39;</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="va">None</span>)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>ax.set_yticklabels([])</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(datetime(<span class="dv">2023</span>, <span class="dv">5</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">0</span>), datetime(<span class="dv">2023</span>, <span class="dv">5</span>, <span class="dv">23</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>fig.autofmt_xdate()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-eventosddos" class="quarto-figure quarto-figure-center">
<figure>
<p><img src="Análisis_files/figure-html/fig-eventosddos-output-1.png" class="img-fluid" /></p>
<figcaption>Figure 8: Visualización de eventos de DDoS</figcaption>
</figure>
</div>
</div>
</div>
<p>En <a href="#fig-eventosddos">Figure 8</a> se puede osbervar la sucesión de eventos reportados por el denunciante. Pareciese ser una sola línea, pero en realidad es que como se intenta sobrecargar, todas envían datos en un tiempo reducido.</p>
<p>Del gráfico podemos identificar que se recibieron las conexiones el 22 de Mayo rondando las 23:50 horas.</p>
</section>
</section>
<section id="análisis-de-isps-1" class="level2" data-number="2.5">
<h2 data-number="2.5"><span class="header-section-number">2.5</span> Análisis de ISPs</h2>
<div class="cell" data-execution_count="39">
<div class="sourceCode" id="cb42"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> df[<span class="st">&quot;isp&quot;</span>].value_counts().to_dict()</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>{<span class="st">&quot;ISP&quot;</span>: <span class="bu">list</span>(recuento.keys()), <span class="st">&quot;Reportes&quot;</span>: <span class="bu">list</span>(recuento.values())})</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>recuento</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ISP</th>
<th data-quarto-table-cell-role="th">Reportes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Suniway Group Limited</td>
<td>75</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Gold Experience Cloud LLC</td>
<td>75</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Dragon Spirit Investments International Co. Li...</td>
<td>73</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>WTW Hightech Company Inc</td>
<td>67</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Suniway Telecom</td>
<td>39</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Suniway Group of Companies Inc.</td>
<td>36</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Intercontinental Internet Data Corp</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Bell Canada</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Comcast Cable Communications LLC</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Cabo Servicos de Telecomunicacoes Ltda</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>Shaw Communications Inc.</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>Delta DCCNet High Speed Internet</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>Nexus Bytes LLC</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>Dot Internet</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>VPSquan L.L.C.</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>Kurun Cloud Inc</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>Shine Telecom Co. Ltd.</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>CTG Server Ltd.</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>Reliablesite.net LLC</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="55">
<div class="sourceCode" id="cb43"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> df[<span class="st">&quot;isp&quot;</span>].value_counts().rename_axis(<span class="st">&#39;ISP&#39;</span>).to_frame(<span class="st">&#39;counts&#39;</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>counts.reset_index(level<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> counts.sort_values(by<span class="op">=</span><span class="st">&#39;counts&#39;</span>)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>bars <span class="op">=</span> plt.barh(counts[<span class="st">&quot;ISP&quot;</span>], counts[<span class="st">&#39;counts&#39;</span>], color<span class="op">=</span><span class="st">&#39;#ef9f76&#39;</span>)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>ax.spines[[<span class="st">&#39;right&#39;</span>, <span class="st">&#39;top&#39;</span>, <span class="st">&#39;bottom&#39;</span>]].set_visible(<span class="va">False</span>) </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>ax.xaxis.set_visible(<span class="va">False</span>)</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">&#39;left&#39;</span>].set_color(<span class="st">&#39;black&#39;</span>)</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>ax.tick_params(axis<span class="op">=</span><span class="st">&#39;y&#39;</span>, colors<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>ax.bar_label(bars, color<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-ispsddos" class="quarto-figure quarto-figure-center">
<figure>
<p><img src="Análisis_files/figure-html/fig-ispsddos-output-1.png" class="img-fluid" /></p>
<figcaption>Figure 9: Número de veces que se denuncio un ISP por ataque DDoS</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="análisis-de-uso-1" class="level2" data-number="2.6">
<h2 data-number="2.6"><span class="header-section-number">2.6</span> Análisis de uso</h2>
<div class="cell" data-execution_count="41">
<div class="sourceCode" id="cb44"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> df[<span class="st">&quot;tipoDeUso&quot;</span>].value_counts().to_dict()</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>recuento <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>{<span class="st">&quot;uso&quot;</span>: <span class="bu">list</span>(recuento.keys()), <span class="st">&quot;Reportes&quot;</span>: <span class="bu">list</span>(recuento.values())})</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>recuento</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">uso</th>
<th data-quarto-table-cell-role="th">Reportes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Data Center/Web Hosting/Transit</td>
<td>335</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Fixed Line ISP</td>
<td>42</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Commercial</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="54">
<div class="sourceCode" id="cb45"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> df[<span class="st">&quot;tipoDeUso&quot;</span>].value_counts().rename_axis(<span class="st">&#39;tipoDeUso&#39;</span>).to_frame(<span class="st">&#39;counts&#39;</span>)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>counts.reset_index(level<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> counts.sort_values(by<span class="op">=</span><span class="st">&#39;counts&#39;</span>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>bars <span class="op">=</span> plt.barh(counts[<span class="st">&quot;tipoDeUso&quot;</span>], counts[<span class="st">&#39;counts&#39;</span>], color<span class="op">=</span><span class="st">&#39;#ef9f76&#39;</span>)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>ax.spines[[<span class="st">&#39;right&#39;</span>, <span class="st">&#39;top&#39;</span>, <span class="st">&#39;bottom&#39;</span>]].set_visible(<span class="va">False</span>) </span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>ax.xaxis.set_visible(<span class="va">False</span>)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">&#39;left&#39;</span>].set_color(<span class="st">&#39;black&#39;</span>)</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>ax.tick_params(axis<span class="op">=</span><span class="st">&#39;y&#39;</span>, colors<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>ax.bar_label(bars, color<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="Análisis_files/figure-html/cell-43-output-1.png" class="img-fluid" /></p>
</div>
</div>
</section>
<section id="visualización-de-la-distribución" class="level2" data-number="2.7">
<h2 data-number="2.7"><span class="header-section-number">2.7</span> Visualización de la “distribución”</h2>
<div class="cell" data-execution_count="43">
<div class="sourceCode" id="cb46"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> netaddr</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> convertirIP(ip):</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">int</span>(netaddr.IPAddress(ip))</span></code></pre></div>
</div>
<div class="cell" data-execution_count="44">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb47"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>datetimes <span class="op">=</span> [evento[<span class="dv">1</span>] <span class="cf">for</span> evento <span class="kw">in</span> eventosDDoS]</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>dicc <span class="op">=</span> {<span class="st">&quot;ip&quot;</span>: df[<span class="st">&quot;ip&quot;</span>],</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;datetime&quot;</span>: datetimes}</span></code></pre></div>
</details>
</div>
<div class="cell" data-execution_count="45">
<div class="sourceCode" id="cb48"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>dfClusters <span class="op">=</span> pd.DataFrame(dicc)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Realizo una conversión de datetime a tipo de dato continuo</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>dfClusters[<span class="st">&quot;datetime&quot;</span>] <span class="op">=</span> dfClusters[<span class="st">&quot;datetime&quot;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.utcnow().timestamp())</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>dfClusters[<span class="st">&quot;ipStr&quot;</span>] <span class="op">=</span> dfClusters[<span class="st">&quot;ip&quot;</span>]</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Convierto las IPs a datos continuos.</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>dfClusters[<span class="st">&quot;ip&quot;</span>] <span class="op">=</span> dfClusters[<span class="st">&quot;ip&quot;</span>].<span class="bu">apply</span>(convertirIP)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="53">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb49"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(data<span class="op">=</span>dfClusters,x<span class="op">=</span><span class="st">&quot;datetime&quot;</span>, y<span class="op">=</span><span class="st">&quot;ip&quot;</span>, color<span class="op">=</span><span class="st">&#39;#ef9f76&#39;</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Tiempo&quot;</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;IPs&quot;</span>)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>plt.xticks([])</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>plt.yticks([])</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-usodeips" class="quarto-figure quarto-figure-center">
<figure>
<p><img src="Análisis_files/figure-html/fig-usodeips-output-1.png" class="img-fluid" /></p>
<figcaption>Figure 10: IPs vs Tiempo</figcaption>
</figure>
</div>
</div>
</div>
<p>Como se puede observar en <a href="#fig-usodeips">Figure 10</a> pareciese ser que a pesar de que se realizaron reportes en horarios distantes, las IPs no ocupan todo el espectro, solo rangos acotados, pudiendose interpretar que son distintos enrutadores de las mismas companías.</p>
<p>Esto permite ver claramente la propiedad de ser “distribuidos”.</p>
<section id="veces-que-fueron-utilizadas-las-ips" class="level3" data-number="2.7.1">
<h3 data-number="2.7.1"><span class="header-section-number">2.7.1</span> Veces que fueron utilizadas las IPs</h3>
<div class="cell" data-tags="[]" data-execution_count="67">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb50"><pre class="sourceCode python cell-code"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Máximo numero de veces que se uso una IP: &quot;</span>,<span class="bu">max</span>(dfClusters[<span class="st">&quot;ipStr&quot;</span>].value_counts()))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Máximo numero de veces que se uso una IP:  1</code></pre>
</div>
</div>
<p>Como podemos notar arriba, ninguna IP se usó más de una vez para enviar solicitudes al atacado.</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->

</body>

</html>